import{r as e,a as r,g as t}from"./assets/react.rqAYhSLv.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var n,s,o={exports:{}},i={};var a,l=(s||(s=1,o.exports=function(){if(n)return i;n=1;var r=e(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,n){var s,i={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)o.call(r,s)&&!l.hasOwnProperty(s)&&(i[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===i[s]&&(i[s]=r[s]);return{$$typeof:t,type:e,key:c,ref:d,props:i,_owner:a.current}}return i.Fragment=s,i.jsx=c,i.jsxs=c,i}()),o.exports),c=e(),d={};var u=function(){if(a)return d;a=1;var e=r();return d.createRoot=e.createRoot,d.hydrateRoot=e.hydrateRoot,d}();function f(e,r,t={}){if("debug"===e)return;const n={timestamp:(new Date).toISOString(),level:e,message:r,...t};"error"===e?console.error(JSON.stringify(n)):"warn"===e?console.warn(JSON.stringify(n)):console.log(JSON.stringify(n))}const p=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],m=()=>{const[e,r]=c.useState(!1),[t,n]=c.useState([]),[s,o]=c.useState({autoSubmit:!1,fieldMapping:{},validationRules:{}}),[i,a]=c.useState(null),[d,u]=c.useState(0),[m,g]=c.useState(null),[h,v]=c.useState([]),[y,x]=c.useState(!1),S=c.useCallback((e=>{e.preventDefault(),f("debug","Drag enter event"),r(!0)}),[]),j=c.useCallback((e=>{e.preventDefault(),r(!1)}),[]),b=c.useCallback((e=>{e.preventDefault()}),[]),[O,N]=c.useState(null);c.useEffect((()=>{const e=(e,r,t)=>("LLM_RESPONSE"===e.type?(f("info","Received LLM response",{data:e.data}),a(e.data),u(e.processingTime||0)):"BACKGROUND_ERROR"===e.type?(f("error","Background error",{error:e.error}),g(e.error)):"FORM_FILLING_COMPLETE"===e.type&&(f("info","Form filling completed",{processingTime:e.processingTime}),u(e.processingTime||0)),!0);return chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e)}),[]);const E=c.useCallback((e=>{e.preventDefault(),f("debug","Drag leave event"),r(!1),f("debug","Drop event triggered"),N(null);const t=Array.from(e.dataTransfer.files),s=t.filter((e=>!p.includes(e.type)||e.size>10485760));if(s.length>0){const e="Invalid files detected. Only PDF/DOCX files under 10MB are allowed.";return f("error","Invalid files detected",{invalidFiles:s}),void N(e)}f("info","Files accepted for processing",{files:t.map((e=>e.name))}),n(t),chrome.runtime.sendMessage({type:"PROCESS_FILES",files:t.map((e=>({name:e.name,type:e.type,size:e.size})))},(e=>{chrome.runtime.lastError?f("error","Failed to send files to background",{error:chrome.runtime.lastError}):f("debug","Files sent to background successfully",{response:e})}))}),[]);return l.jsxs("div",{className:"popup-container",children:[l.jsx("h1",{children:"Extension Popup"}),l.jsx("div",{className:"drop-zone "+(e?"dragging":""),onDragEnter:S,onDragLeave:j,onDragOver:b,onDrop:E,children:e?l.jsx("p",{children:"Drop files here"}):l.jsx("p",{children:"Drag and drop files here"})}),O&&l.jsx("div",{className:"error-message",children:O}),t.length>0&&l.jsxs("div",{className:"file-list",children:[l.jsx("h3",{children:"Dropped Files:"}),l.jsx("ul",{children:t.map(((e,r)=>l.jsx("li",{children:e.name},r)))}),l.jsxs("div",{className:"form-config-section",children:[l.jsx("h3",{children:"Form Configuration"}),l.jsx("div",{className:"config-option",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:s.autoSubmit,onChange:e=>{f("debug","Form config changed",{autoSubmit:e.target.checked}),o({...s,autoSubmit:e.target.checked})}}),"Auto-submit after filling"]})})]}),i&&l.jsxs("div",{className:"llm-response",children:[l.jsx("h3",{children:"LLM Analysis"}),l.jsx("pre",{children:JSON.stringify(i,null,2)})]}),d>0&&l.jsxs("div",{className:"performance-metrics",children:[l.jsx("h3",{children:"Performance"}),l.jsxs("p",{children:["Processing time: ",d,"ms"]})]}),m&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"Background Error"}),l.jsx("p",{children:m})]})]})]})};t(u).createRoot(document.getElementById("root")).render(l.jsx(m,{}));
